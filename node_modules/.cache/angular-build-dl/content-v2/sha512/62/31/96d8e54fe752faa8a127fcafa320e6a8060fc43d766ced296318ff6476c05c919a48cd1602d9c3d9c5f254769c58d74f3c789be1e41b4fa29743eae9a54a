{"version":3,"sources":["./src/app/pages/dashboard/search-results/search-results-routing.module.ts","./src/app/pages/dashboard/search-results/search-results.module.ts","./src/app/pages/dashboard/search-results/search-results.page.ts","./src/app/pages/dashboard/search-results/search-results.page.html"],"names":[],"mappings":"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","file":"src_app_pages_dashboard_search-results_search-results_module_ts-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SearchResultsPage } from './search-results.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SearchResultsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SearchResultsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SearchResultsPageRoutingModule } from './search-results-routing.module';\n\nimport { SearchResultsPage } from './search-results.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SearchResultsPageRoutingModule\n  ],\n  declarations: [SearchResultsPage]\n})\nexport class SearchResultsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ApiService } from 'src/app/services/api/api.service';\nimport { CommonService } from 'src/app/services/common/common.service';\n\n@Component({\n  selector: 'app-search-results',\n  templateUrl: './search-results.page.html',\n  styleUrls: ['./search-results.page.scss'],\n})\nexport class SearchResultsPage implements OnInit {\n\n  constructor(\n    public _router: Router,\n    public _api: ApiService,\n    public _commonService: CommonService\n  ) {\n    if(this._commonService.transaction_id==null || this._commonService.transaction_id==undefined)\n    {\n      this._commonService.transaction_id = \"c95d59cf-5d18-4bd7-b6c7-84a8b02b9b00\";\n      // this._router.navigate([\"/dashboard/\"]);\n    }\n  }\n\n  ngOnInit() {\n    this.get_onSearchData();\n\n    // this._commonService.SOCKET.on('on_search', (data) => {\n    //   this.get_onSearchData();\n    // });\n  }\n\n  get_onSearchData()\n  {\n    let param = {\n      \"transaction_id\": this._commonService.transaction_id\n    }\n    this._api.get_onSearchData(param).subscribe((res: any) => {\n      console.log(\"get_onSearchData res\");\n      // console.log(res);\n      this._commonService.searchResults = [];\n      res.data.forEach(data => {\n        if(data.hasOwnProperty(\"request_body\"))\n        {\n          var results = JSON.parse(data.request_body);\n          console.log(results);\n          if(results.status_code==200 && results.hasOwnProperty(\"context\") && results.hasOwnProperty(\"message\") && results.message.hasOwnProperty(\"catalog\") && results.message.catalog.hasOwnProperty(\"providers\") && (results.message.catalog.providers).length>0)\n          {\n            (results.message.catalog.providers).forEach(provider => {\n              provider.fulfillments.forEach(fulfillment => {\n                var isDoctorAlreadyAdded = false;\n                for(var i=0; i<(this._commonService.searchResults).length;i++)\n                {\n                  if(this._commonService.searchResults[i].doctor_id == fulfillment.person.id)\n                  {\n                    isDoctorAlreadyAdded = true;\n                    break;\n                  }\n                };\n                if(!isDoctorAlreadyAdded)\n                {\n                  var expression = /[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)?/gi;\n                  var regex = new RegExp(expression);\n                  if(!fulfillment.person.image.match(regex)) {\n                    fulfillment.person.image = \"\";\n                  }\n\n                  // message.catalog.providers[0].fulfillments[0].quote.price.value\n                  this._commonService.searchResults.push({\n                    service_provider: results.message.catalog.descriptor.name,\n                    provider_id: provider.id,\n                    hospital_name: provider.descriptor.name,\n                    doctor_name: fulfillment.person.name,\n                    doctor_id: fulfillment.person.id,\n                    doctor_gender: (fulfillment.person.gender).toLowerCase(),\n                    doctor_img: fulfillment.person.image,\n                    doctor_cred: fulfillment.person.cred,\n                    doctor_service_type: fulfillment.type==\"NA\"?\"\":fulfillment.type,\n                    doctor_service_category: \"\",\n                    quote: fulfillment.quote,\n                    start: fulfillment.start,\n                    end: fulfillment.end,\n                    item_id: null\n                  });\n                }\n              });\n\n              provider.items.forEach(item => {\n                this._commonService.searchResults.forEach(doctor => {\n                  if(doctor.doctor_id==item.fulfillment_id)\n                  {\n                    provider.categories.forEach(category => {\n                      if(category.id==item.category_id)\n                      {\n                        doctor.doctor_service_category = category.descriptor.name==\"NA\"?\"\":category.descriptor.name;\n                        doctor.item_id = item.id;\n                      }\n                    });\n                  }\n                });\n\n              });\n              console.log(this._commonService.searchResults);\n            });\n          }\n        }\n      });\n      // console.log(this._commonService.searchResults);\n    }, (err) => {\n      if (err) {\n        console.error(err);\n      }\n    })\n  }\n\n  book_appointment(index: any,data: any)\n  {\n    this._commonService.presentLoading(1000);\n\n    // console.log(index);\n    this._router.navigate([\"/dashboard/book-appointment\",index]);\n    return;\n    \n    // var param = {\n    //   provider_id: data.provider_id,\n    //   item_id: data.item_id,\n    //   fulfillment_id: data.doctor_id,\n    //   transaction_id: this._commonService.transaction_id\n    // }\n    // console.log(data);\n    // this._router.navigate([\"/dashboard/search-results\"]);\n\n  //   this._api.select(param).subscribe((res: any) => {\n  //     console.log(res);\n  //     if(res.success && res.body.message.ack.status==\"ACK\")\n  //     {\n  //       this._router.navigate([\"/dashboard/book-appointment\"]);\n  //     }\n  //   }, (err) => {\n  //     if (err) {\n  //       console.error(err);\n  //     }\n  //   });\n  }\n}\n","<ion-header [translucent]=\"true\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-menu-button></ion-menu-button>\n    </ion-buttons>\n    <ion-title>Search Results</ion-title>\n    <ion-buttons slot=\"secondary\">\n      <ion-back-button defaultHref=\"/dashboard/home\"></ion-back-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\">\n  <div class=\"container-fluid w-100 h-100 p-3\">\n\n    <div *ngIf=\"_commonService.searchResults.length==0\" class=\"col-12 text-center\">\n      No Doctors Found\n    </div>\n\n    <div *ngIf=\"_commonService.searchResults.length>0\" class=\"d-flex flex-wrap w-100 h-100\">\n    \n      <div *ngFor=\"let searchResult of _commonService.searchResults;index as i;\" class=\"d-block col-12\">\n        <ion-card>\n          <ion-item class=\"border-0\">\n            <div class=\"h-100\" style=\"padding-top: 5px;padding-bottom: 5px;\">\n              <!-- <img src=\"assets/download.jpeg\" alt=\"\" style=\"width: 60px;margin: 5px 15px 5px 0px;border-radius: 100%;\"> -->\n              <img [src]=\"searchResult.doctor_img!=''?searchResult.doctor_img:searchResult.doctor_gender=='male'?'assets/male-doctor.png':'assets/female-doctor.png'\" alt=\"\" style=\"width: 60px;margin: 5px 15px 5px 0px;border-radius: 100%;\">\n            </div>\n            <ion-label>\n              {{ searchResult.doctor_name }}<br>\n              <span class=\"text-muted\">{{ searchResult.doctor_service_type }}/{{searchResult.doctor_service_category}}</span><br>\n              <!-- <span style=\"color: #3880ff;\"><b>doctor.hrp@hpr.abdm</b></span><br> -->\n              <!-- <ion-card-subtitle class=\"mt-2\">Marathi / Hindi / English<br>12 Yrs of Experience</ion-card-subtitle> -->\n            </ion-label>\n          </ion-item>\n          \n          <ion-card-content class=\"m-0 p-2\">\n            <div class=\"d-flex flex-wrap justify-content-start\">\n              <ion-chip outline color=\"primary\" (click)=\"book_appointment(i,searchResult);\">\n                <ion-label>\n                  <span style=\"color: red;font-size : 16px;font-weight: 700;\">Rs. {{searchResult.quote.price.value}}</span>\n                  <span style=\"font-size: 12px; font-weight:600;margin-left: 10px;color: var(--ion-color-primary);\">{{searchResult.service_provider}}</span>\n                </ion-label>\n              </ion-chip>\n              <!-- <ion-button size=\"small\" (click)=\"book_appointment(searchResult);\">Book Appointment</ion-button> -->\n              <!-- <ion-button style=\"color: #3880ff;\" fill=\"\"><ion-icon color=\"primary\" slot=\"start\" name=\"calendar\"></ion-icon>Reschedule</ion-button> -->\n              <!-- <ion-button style=\"color: #3880ff;\" fill=\"\"><ion-icon color=\"primary\" slot=\"start\" name=\"chatbubble-ellipses\"></ion-icon>Chat</ion-button> -->\n            </div>\n          </ion-card-content>\n        </ion-card>  \n      </div>\n      \n    </div>\n  </div>\n</ion-content>\n"],"sourceRoot":"webpack:///"}