{"version":3,"sources":["webpack:///src/app/pages/dashboard/search-results/search-results-routing.module.ts","webpack:///src/app/pages/dashboard/search-results/search-results.module.ts","webpack:///src/app/pages/dashboard/search-results/search-results.page.html","webpack:///src/app/pages/dashboard/search-results/search-results.page.ts"],"names":["routes","path","component","SearchResultsPage","SearchResultsPageRoutingModule","RouterModule","SearchResultsPageModule","CommonModule","FormsModule","IonicModule","_router","_api","_commonService","searchResults","transaction_id","undefined","navigate","get_onSearchData","SOCKET","on","data","param","subscribe","res","console","log","forEach","hasOwnProperty","results","JSON","parse","request_body","status_code","message","catalog","providers","length","provider","fulfillments","fulfillment","isDoctorAlreadyAdded","i","doctor_id","person","id","expression","regex","RegExp","image","match","push","service_provider","descriptor","name","provider_id","hospital_name","doctor_name","doctor_gender","gender","toLowerCase","doctor_img","doctor_cred","cred","doctor_service_type","type","doctor_service_category","item_id","items","item","doctor","fulfillment_id","categories","category","category_id","err","presentLoading","select","error"],"mappings":"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","file":"src_app_pages_dashboard_search-results_search-results_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SearchResultsPage } from './search-results.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SearchResultsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SearchResultsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SearchResultsPageRoutingModule } from './search-results-routing.module';\n\nimport { SearchResultsPage } from './search-results.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SearchResultsPageRoutingModule\n  ],\n  declarations: [SearchResultsPage]\n})\nexport class SearchResultsPageModule {}\n","<ion-header [translucent]=\"true\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-menu-button></ion-menu-button>\n    </ion-buttons>\n    <ion-title>Search Results</ion-title>\n    <ion-buttons slot=\"secondary\">\n      <ion-back-button defaultHref=\"/dashboard/home\"></ion-back-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\">\n  <div class=\"container-fluid w-100 h-100 p-3\">\n    <div class=\"d-flex flex-wrap w-100 h-100\">\n    \n      <div *ngFor=\"let searchResult of searchResults\" class=\"d-block col-12\">\n        <ion-card>\n          <ion-item class=\"border-0\">\n            <div class=\"h-100\" style=\"padding-top: 5px;padding-bottom: 5px;\">\n              <!-- <img src=\"assets/download.jpeg\" alt=\"\" style=\"width: 60px;margin: 5px 15px 5px 0px;border-radius: 100%;\"> -->\n              <img [src]=\"searchResult.doctor_img!=''?searchResult.doctor_img:searchResult.doctor_gender=='male'?'assets/male-doctor.png':'assets/female-doctor.png'\" alt=\"\" style=\"width: 60px;margin: 5px 15px 5px 0px;border-radius: 100%;\">\n            </div>\n            <ion-label>\n              {{ searchResult.doctor_name }}<br>\n              <span class=\"text-muted\">{{ searchResult.doctor_service_type }}/{{searchResult.doctor_service_category}}</span><br>\n              <!-- <span style=\"color: #3880ff;\"><b>doctor.hrp@hpr.abdm</b></span><br> -->\n              <!-- <ion-card-subtitle class=\"mt-2\">Marathi / Hindi / English<br>12 Yrs of Experience</ion-card-subtitle> -->\n            </ion-label>\n          </ion-item>\n          \n          <ion-card-content class=\"m-0 p-2\">\n            <div class=\"d-flex flex-wrap justify-content-end\">\n              <!-- <ion-chip outline color=\"primary\">\n                <ion-label>\n                  <span style=\"color: red;font-size : 16px;font-weight: 700;\">Rs 900</span>\n                  <span style=\"font-size: 12px; font-weight:600;margin-left: 10px;color: var(--ion-color-primary);\">Medixcel</span>\n                </ion-label>\n              </ion-chip> -->\n              <ion-button size=\"small\" (click)=\"book_appointment(searchResult);\">Book Appointment</ion-button>\n              <!-- <ion-button style=\"color: #3880ff;\" fill=\"\"><ion-icon color=\"primary\" slot=\"start\" name=\"calendar\"></ion-icon>Reschedule</ion-button> -->\n              <!-- <ion-button style=\"color: #3880ff;\" fill=\"\"><ion-icon color=\"primary\" slot=\"start\" name=\"chatbubble-ellipses\"></ion-icon>Chat</ion-button> -->\n            </div>\n          </ion-card-content>\n        </ion-card>  \n      </div>\n      \n    </div>\n  </div>\n</ion-content>\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ApiService } from 'src/app/services/api/api.service';\nimport { CommonService } from 'src/app/services/common/common.service';\n\n@Component({\n  selector: 'app-search-results',\n  templateUrl: './search-results.page.html',\n  styleUrls: ['./search-results.page.scss'],\n})\nexport class SearchResultsPage implements OnInit {\n\n  public searchResults : any = [];\n\n  constructor(\n    public _router: Router,\n    public _api: ApiService,\n    public _commonService: CommonService\n  ) {\n    if(this._commonService.transaction_id==null || this._commonService.transaction_id==undefined)\n    {\n      // this._commonService.transaction_id = \"71c2b1b4-0ef2-4068-a9fc-65e56a961d5e\";\n      this._router.navigate([\"/dashboard/\"]);\n    }\n  }\n\n  ngOnInit() {\n    this.get_onSearchData();\n\n    this._commonService.SOCKET.on('on_search', (data) => {\n      this.get_onSearchData();\n    });\n  }\n\n  get_onSearchData()\n  {\n    let param = {\n      \"transaction_id\": this._commonService.transaction_id\n    }\n    // console.log(\"get_onSearchData\",param);\n    this._api.get_onSearchData(param).subscribe((res: any) => {\n      console.log(\"get_onSearchData res\");\n      // console.log(res);\n      this.searchResults = [];\n      res.data.forEach(data => {\n        if(data.hasOwnProperty(\"request_body\"))\n        {\n          var results = JSON.parse(data.request_body);\n          console.log(results);\n          if(results.status_code==200 && results.hasOwnProperty(\"context\") && results.hasOwnProperty(\"message\") && results.message.hasOwnProperty(\"catalog\") && results.message.catalog.hasOwnProperty(\"providers\") && (results.message.catalog.providers).length>0)\n          {\n            (results.message.catalog.providers).forEach(provider => {\n              provider.fulfillments.forEach(fulfillment => {\n                var isDoctorAlreadyAdded = false;\n                for(var i=0; i<(this.searchResults).length;i++)\n                {\n                  if(this.searchResults[i].doctor_id == fulfillment.person.id)\n                  {\n                    isDoctorAlreadyAdded = true;\n                    break;\n                  }\n                };\n                if(!isDoctorAlreadyAdded)\n                {\n                  var expression = /[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)?/gi;\n                  var regex = new RegExp(expression);\n                  if(!fulfillment.person.image.match(regex)) {\n                    fulfillment.person.image = \"\";\n                  }\n                  this.searchResults.push({\n                    service_provider: results.message.catalog.descriptor.name,\n                    provider_id: provider.id,\n                    hospital_name: provider.descriptor.name,\n                    doctor_name: fulfillment.person.name,\n                    doctor_id: fulfillment.person.id,\n                    doctor_gender: (fulfillment.person.gender).toLowerCase(),\n                    doctor_img: fulfillment.person.image,\n                    doctor_cred: fulfillment.person.cred,\n                    doctor_service_type: fulfillment.type==\"NA\"?\"\":fulfillment.type,\n                    doctor_service_category: \"\",\n                    item_id: null\n                  });\n                }\n              });\n\n              provider.items.forEach(item => {\n                this.searchResults.forEach(doctor => {\n                  if(doctor.doctor_id==item.fulfillment_id)\n                  {\n                    provider.categories.forEach(category => {\n                      if(category.id==item.category_id)\n                      {\n                        doctor.doctor_service_category = category.descriptor.name==\"NA\"?\"\":category.descriptor.name;\n                        doctor.item_id = item.id;\n                      }\n                    });\n                  }\n                });\n\n              });\n            });\n          }\n        }\n      });\n      // console.log(this.searchResults);\n    }, (err) => {\n      if (err) {\n        console.log(err);\n      }\n    })\n  }\n\n  book_appointment(data: any)\n  {\n    this._commonService.presentLoading(5000);\n    var param = {\n      provider_id: data.provider_id,\n      item_id: data.item_id,\n      fulfillment_id: data.doctor_id,\n      transaction_id: this._commonService.transaction_id\n    }\n\n    this._api.select(param).subscribe((res: any) => {\n      this._router.navigate([\"/dashboard/book-appointment\"]);\n    }, (err) => {\n      if (err) {\n        console.error(err);\n      }\n    });\n  }\n}\n"]}