{"version":3,"sources":["webpack:///src/app/pages/dashboard/collect-payment/collect-payment-routing.module.ts","webpack:///src/app/pages/dashboard/collect-payment/collect-payment.module.ts","webpack:///src/app/pages/dashboard/collect-payment/collect-payment.page.html","webpack:///src/app/pages/dashboard/collect-payment/collect-payment.page.ts"],"names":["routes","path","component","CollectPaymentPage","CollectPaymentPageRoutingModule","RouterModule","CollectPaymentPageModule","CommonModule","FormsModule","IonicModule","_router","_api","_commonService","activatedRoute","weekday","monthNames","doctorInfo","search_index","parseInt","snapshot","paramMap","get","transaction_id","undefined","navigate","SOCKET","on","data","setTimeout","start_time","Date","searchResults","order","message","fulfillment","start","time","timestamp","end_time","end","blooked_slot","getDay","getMonth","getDate","slice","getHours","getMinutes","dataArr","context","param","details","presentLoading","confirm","subscribe","res","console","log","success","body","ack","status","err","error"],"mappings":"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","file":"src_app_pages_dashboard_collect-payment_collect-payment_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CollectPaymentPage } from './collect-payment.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CollectPaymentPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CollectPaymentPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CollectPaymentPageRoutingModule } from './collect-payment-routing.module';\n\nimport { CollectPaymentPage } from './collect-payment.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CollectPaymentPageRoutingModule\n  ],\n  declarations: [CollectPaymentPage]\n})\nexport class CollectPaymentPageModule {}\n","<ion-header [translucent]=\"true\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-menu-button></ion-menu-button>\n    </ion-buttons>\n    <ion-title>Book Appointment</ion-title>\n    <ion-buttons slot=\"secondary\">\n      <ion-back-button defaultHref=\"/dashboard/book-appointment\"></ion-back-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\">\n  <div class=\"container-fluid w-100 h-100 p-3\">\n    <ion-card class=\"m-0 b-0 mb-3\">\n      <ion-item class=\"border-0\" lines=\"none\">\n        <div class=\"h-100\" style=\"padding-top: 5px;padding-bottom: 5px;\">\n          <img [src]=\"this._commonService.searchResults.fulfillments[this.search_index].agent.gender=='M'?'assets/male-doctor.png':'assets/female-doctor.png'\" alt=\"\" style=\"width: 60px;margin: 5px 15px 5px 0px;border-radius: 100%;\">\n        </div>\n        <ion-label>\n          {{ this._commonService.searchResults.fulfillments[this.search_index].agent.name }}<br>\n          <span class=\"text-muted\">{{ this._commonService.searchResults.fulfillments[this.search_index].type }} / {{this._commonService.searchResults.fulfillments[this.search_index].items.descriptor.name}} {{this._commonService.searchResults.fulfillments[this.search_index].agent.tags[\"@abdm/gov/in/education\"]?\"/\"+this._commonService.searchResults.fulfillments[this.search_index].agent.tags[\"@abdm/gov/in/education\"]:\"\"}}</span><br>\n          <span style=\"color: #3880ff;\"><b>{{this._commonService.searchResults.fulfillments[this.search_index].agent.tags[\"@abdm/gov/in/hpr_id\"]}}</b></span><br *ngIf=\"this._commonService.searchResults.fulfillments[this.search_index].agent.tags['@abdm/gov/in/hpr_id']\">\n          <ion-card-subtitle>{{this._commonService.searchResults.fulfillments[this.search_index].agent.tags[\"@abdm/gov/in/languages\"]}}<br>{{this._commonService.searchResults.fulfillments[this.search_index].agent.tags[\"@abdm/gov/in/experience\"]}}</ion-card-subtitle>\n        </ion-label>\n      </ion-item>\n    </ion-card>\n\n    <div class=\"w-100 d-block\">\n      <span class=\"text-muted d-block fs-12\">Selected date and time for Teleconsultation</span>\n      <span class=\"d-block\">{{blooked_slot}}</span>\n    </div>\n\n    <div class=\"w-100 d-block mt-5\" *ngIf=\"_commonService.searchResults.order\">\n      <div class=\"mb-2\">\n        <span style=\"font-weight: 700;\">Billing Details</span>\n      </div>\n      <!-- <div class=\"d-flex justify-content-between\">\n        <span class=\"text-muted fs-14\">Consultation Fees</span>\n        <span>900</span>\n      </div>\n      <div class=\"d-flex justify-content-between\">\n        <span class=\"text-muted fs-14\">CGST(5%)</span>\n        <span>50</span>\n      </div>\n      <div class=\"d-flex justify-content-between\">\n        <span class=\"text-muted fs-14\">SGST(5%)</span>\n        <span>50</span>\n      </div>\n      <div class=\"d-flex justify-content-between\">\n        <span class=\"text-muted fs-14\">Registration Fees</span>\n        <span>400</span>\n      </div> -->\n\n      <div class=\"d-flex justify-content-between\" *ngFor=\"let quote of _commonService.searchResults.order.message.order.quote.quote.breakup\">\n        <span class=\"text-muted fs-14\">{{quote.title}}</span>\n        <span>{{quote.price.value}}</span>\n      </div>\n      <hr>\n      <div class=\"d-flex justify-content-between\" style=\"font-weight: 700;\">\n        <span class=\"fs-14 text-primary\">Total Payable</span>\n        <span class=\"text-primary\">Rs. {{_commonService.searchResults.order.message.order.quote.quote.price.value}}</span>\n      </div>\n    </div>\n\n    <div class=\"position-absolute bottom-0 start-0 d-block w-100 px-3\">\n      <ion-button expand=\"full\" (click)=\"confirm()\">Pay Now</ion-button>\n    </div>\n  </div>\n</ion-content>\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ApiService } from 'src/app/services/api/api.service';\nimport { CommonService } from 'src/app/services/common/common.service';\n\n@Component({\n  selector: 'app-collect-payment',\n  templateUrl: './collect-payment.page.html',\n  styleUrls: ['./collect-payment.page.scss'],\n})\nexport class CollectPaymentPage implements OnInit {\n  public weekday = [\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"];\n  public monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n  public search_index: any;\n  public doctorInfo : any = [];\n  public blooked_slot: any;\n\n  constructor(\n    public _router: Router,\n    public _api: ApiService,\n    public _commonService: CommonService,\n    private activatedRoute: ActivatedRoute\n  ) {\n    this.search_index = parseInt(this.activatedRoute.snapshot.paramMap.get('id'));\n    if(this._commonService.transaction_id==null || this._commonService.transaction_id==undefined)\n    {\n      this._router.navigate([\"/dashboard/\"]);\n    }\n  }\n\n  ngOnInit() {\n    // console.log(this._commonService.searchResults.fulfillments[this.search_index]);\n\n    this._commonService.SOCKET.on('on_init', (data) => {\n      setTimeout(() => {\n        let start_time = new Date(this._commonService.searchResults.order.message.order.fulfillment.start.time.timestamp);\n        let end_time = new Date(this._commonService.searchResults.order.message.order.fulfillment.end.time.timestamp);\n        this.blooked_slot = this.weekday[start_time.getDay()]+\" \"+this.monthNames[start_time.getMonth()]+\" \"+(\"0\"+start_time.getDate()).slice(-2)+\", \"+(\"0\"+start_time.getHours()).slice(-2)+\":\"+(\"0\"+start_time.getMinutes()).slice(-2);\n      }, 500);\n    });\n\n    setTimeout(() => {\n      let start_time = new Date(this._commonService.searchResults.order.message.order.fulfillment.start.time.timestamp);\n      let end_time = new Date(this._commonService.searchResults.order.message.order.fulfillment.end.time.timestamp);\n      this.blooked_slot = this.weekday[start_time.getDay()]+\" \"+this.monthNames[start_time.getMonth()]+\" \"+(\"0\"+start_time.getDate()).slice(-2)+\", \"+(\"0\"+start_time.getHours()).slice(-2)+\":\"+(\"0\"+start_time.getMinutes()).slice(-2);\n    }, 3000);\n\n    // console.log(this._commonService.searchResults.order);\n    // var results = this._commonService.searchResults[this.search_index]\n    // console.log(results);\n\n    // this.doctorInfo.push({\n    //   service_provider: results.service_provider,\n    //   provider_id: results.provider_id,\n    //   doctor_name: results.doctor_name,\n    //   doctor_id: results.doctor_id,\n    //   doctor_gender: (results.doctor_gender).toLowerCase(),\n    //   doctor_img: results.doctor_image,\n    //   doctor_cred: results.doctor_cred,\n    //   doctor_service_type: results.doctor_service_type==\"NA\"?\"\":results.doctor_service_type,\n    //   doctor_service_category: results.doctor_service_category,\n    //   item_id: results.item_id,\n    //   quote: results.quote,\n    //   start: results.start,\n    //   end: results.end\n    // });\n\n    // console.log(this.doctorInfo);\n  }\n\n  // npx greenlock init --config-dir ./greenlock.d --maintainer-email 'shubham.bhadale@plus91.in'\n  // npx greenlock add --subject uhi-eua-socket.medixcel.in --altnames uhi-eua-socket.medixcel.in\n\n  confirm()\n  {\n    // console.log(this._commonService.searchResults.order.message.order.payment.uri);\n    // window.location.href = this._commonService.searchResults.order.message.order.payment.uri;\n    // return;\n    // console.log(this._commonService.searchResults.order);\n    let dataArr = this._commonService.searchResults.order.message.order;\n    dataArr[\"context\"] = this._commonService.searchResults.order.context;\n    var param = {\n      details: dataArr\n    }\n    // console.log(\"confirm\",param);\n    this._commonService.presentLoading();\n    this._api.confirm(param).subscribe((res: any) => {\n      console.log(res);\n      if(res.success && res.body.message.ack.status==\"ACK\")\n      {\n        this._router.navigate([\"/dashboard/confirm-booking\"]);\n      }\n    }, (err) => {\n      if (err) {\n        console.error(err);\n      }\n    });\n  }\n\n}\n"]}